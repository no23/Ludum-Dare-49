;Simpler for loop for ranges
;(for 0 10 1 (begin (write i) (newline)))
(define-macro (for start count inc expression)
	`(do ((i ,start (+ i ,inc)))
		((= i ,count))
		,expression))

(define (idiv a b) (truncate (/ a b)))

(define (make-sprite-strip file width height x y count time offsetX offsetY)
  (let ((a '())) 
    (for 0 count 1 
         (set! a 
           (append (list 
                     (create-sprite 
                       (string-append "/Assets/" file) 
                       (+ x (* width i)) 
                       y 
                       width 
                       height)) 
                   	a)))
  (create-sprite-sheet (reverse a) time offsetX offsetY)))



;############################
;#  Tiles                   #
;############################
(define (make-tiles file size width height)
  (let* ((a '()) 
    	(count-x (idiv width size))
    	(count-y (idiv height size))
        (count (* count-x count-y))) 
    (for 0 count 1 
         (begin 
           ;(write 
           ;  (string-append
           ; 	(number->string (* size (modulo i count-x)))
           ;  	", "
           ; 	(number->string (* size (idiv i count-x)))
           ;  ))
    	   ;(newline)
         (set! a 
           (append (list 
                     (create-sprite 
                       (string-append "/Assets/" file) 
                       (* size (modulo i count-x))
                       (* size (idiv i count-x)) 
                       size 
                       size)) 
                   	a))))
  	(reverse a)))


(define (make-simple-tile sprite x y size)
 (let ((e (create-entity)))
	(set-component e 'Sprite (list sprite -20))
	(set-component e 'Bounds (list size size))
	(set-component e 'Position (list x y))
	e))

(define (make-tiles2 file size width height)
  (let* ((count-x (truncate (/ width size)))
    	 (count-y (truncate (/ height size)))
         (count (* count-x count-y))) 
    (for 0 count 1 
         (let ((x (* size (modulo i count-x)))
               (y (* size (truncate (/ i count-x)))))
           ;(write (string-append 
           ;         (number->string x)             	
           ;         ", "
           ;  		(number->string y)))
           ;(newline)

           (make-simple-tile (create-sprite 
                       (string-append "/Assets/" file) 
                       x
                       y
                       size
                       size) x y size)))))

;display animation of a bunch of tiles cycling
(define tiles (create-sprite-sheet (make-tiles "floors.png" 8 80 80) 0.5 0 0))

(define floor-tiles (make-tiles "floors.png" 8 80 80))


(define (tile-xy size i width)
  (list (* size (modulo i width)
  	(* size (truncate (/ i width))))))

(define (spawn-floor x y count-x count-y)
  (make-simple-tile (list-ref floor-tiles 8) x y 8))

(define (t)
(for 0 (length floor-tiles) 1 
	(make-simple-tile (list-ref floor-tiles 8) (* i 8) 0 8)))

;(define (spawn-floor x y count-x count-y)
;  (for 0 (* count-x count-y) 1
;  		(let ((xy (tile-xy size i count-x)))
;      (make-simple-tile (list-ref floor-tiles 8) (list-ref xy 0) (list-ref xy 1) 8))))

(make-tiles "floors.png" 8 80 80)
(make-tiles "walls.png" 8 80 80)
(make-tiles "props.png" 8 80 80)





















;############################
;#  Sprite sheets           #
;############################
;Name filename width height x y count
(define (run-right) (make-sprite-strip "run-nhb.png" 12 24 0 48 8 0.1 0 0))
(define (run-left) (make-sprite-strip "run-nhb.png" 12 24 0 72 8 0.1 0 0))

(define (idle-special-right) (make-sprite-strip "idle.png" 12 24 0 0 14 0.1 0 0))
(define (idle-special-left) (make-sprite-strip "idle.png" 12 24 0 24 14 0.1 0 0))
(define (idle-right) (make-sprite-strip "idle.png" 12 24 0 48 6 0.1 0 0))
(define (idle-left) (make-sprite-strip "idle.png" 12 24 0 72 6 0.1 0 0))
(define (idle-gun-right) (make-sprite-strip "idle.png" 12 24 0 96 6 0.1 0 0))
(define (idle-gun-left) (make-sprite-strip "idle.png" 12 24 0 120 6 0.1 0 0))

(define (throw-right) (make-sprite-strip "throw.png" 16 24 0 0 8 0.1 0 0))
(define (throw-left) (make-sprite-strip "throw.png" 16 24 0 24 8 0.1 0 0))

(define (dodge-right) (make-sprite-strip "dodge.png" 24 24 0 0 7 0.1 -6 0))
(define (getup-right) (make-sprite-strip "dodge.png" 24 24 (* 24 7) 0 2 0.1 -6 0))

(define (dodge-left) (make-sprite-strip "dodge.png" 24 24 0 24 7 0.1 -6 0))
(define (getup-left) (make-sprite-strip "dodge.png" 24 24 (* 24 7) 24 2 0.1 -6 0))

(define (die-right) (make-sprite-strip "death.png" 24 24 0 0 8 0.1 -8 0))
(define (undie-right) (make-sprite-strip "death.png" 24 24 (* 24 8) 0 6 0.1 -7 0))

(define (die-left) (make-sprite-strip "death.png" 24 24 0 24 8 0.1 -4 0))
(define (undie-left) (make-sprite-strip "death.png" 24 24 (* 24 8) 24 6 0.1 -5 0))

(define (small-idle-right) (make-sprite-strip "smallidle.png" 24 24 0 24 6 0.1 -4 0))
(define (small-idle-left) (make-sprite-strip "smallidle.png" 24 24 0 0 6 0.1 -4 0))

(define (small-run-right) (make-sprite-strip "smallrun.png" 24 24 0 24 7 0.1 -4 0))
(define (small-run-left) (make-sprite-strip "smallrun.png" 24 24 0 0 7 0.1 -4 0))

(define (small-swing-right) (make-sprite-strip "smallswing.png" 96 96 0 96 16 0.1 -40 -46))
(define (small-swing-left) (make-sprite-strip "smallswing.png" 96 96 0 0 16 0.1 -40 -46))


(define (blood-splatter) (make-tiles "blood1.png" 16 64 16))

(define (blood-spray-1) (make-sprite-strip "blood.png" 16 16 0 0 4 0.1 0 0))
(define (blood-spray-2) (make-sprite-strip "blood.png" 16 16 0 16 4 0.1 0 0))


(define (hit-splash-1) (make-sprite-strip "hitsplash.png" 8 8 0 0 4 0.1 0 0))
(define (hit-splash-2) (make-sprite-strip "hitsplash.png" 8 8 0 8 4 0.1 0 0))

(define (big-idle-right) (make-sprite-strip "bigidle.png" 48 48 0 0 1 0.1 0 -24))
(define (big-idle-left) (make-sprite-strip "bigidle.png" 48 48 0 48 1 0.1 0 -24))

(define (big-run-right) (make-sprite-strip "bigrun.png" 64 48 0 0 10 0.1 -8 -24))
(define (big-run-left) (make-sprite-strip "bigrun.png" 64 48 0 48 10 0.1 -8 -24))

(define (big-slam-right) (make-sprite-strip "bigslam.png" 64 64 0 0 12 0.1 -8 -24))
(define (big-slam-left) (make-sprite-strip "bigslam.png" 64 64 0 64 12 0.1 -8 -24))

(define (slide-dust) (make-sprite-strip "slidedust.png" 16 16 0 0 4 0.1 0 0))

(define (explosion) (make-sprite-strip "explosion.png" 48 48 0 0 8 0.1 0 0))

;(define sheet1 (create-sprite-sheet 
;                 (list 
;                   (create-sprite "/Assets/idle.png" 0 0 12 24)
;                   (create-sprite "/Assets/idle.png" 12 0 12 24)
;                   (create-sprite "/Assets/idle.png" 24 0 12 24)
;                   (create-sprite "/Assets/idle.png" 36 0 12 24)
;                   (create-sprite "/Assets/idle.png" 48 0 12 24))
;                  0.1 0 0))
(define (tpose-right-sheet) (make-sprite-strip "tpose.png" 16 16 0 0 1 1 0 0))
(define (tpose-left-sheet) (make-sprite-strip "tpose.png" 16 16 16 0 1 1 0 0))

(define tpose-right (create-sprite "/Assets/tpose.png" 0 0 16 16))
(define tpose-left (create-sprite "/Assets/tpose.png" 16 0 16 16))


(define (player-animations) (list
	(list "tpose-right" (tpose-right-sheet))
	(list "tpose-left" (tpose-left-sheet))
	(list "run-right" (run-right))
	(list "run-left" (run-left))
	(list "idle-special-right" (idle-special-right))
	(list "idle-special-left" (idle-special-left))
	(list "idle-gun-right" (idle-gun-right))
	(list "idle-gun-left" (idle-gun-left))
	(list "idle-right" (idle-right))
	(list "idle-left" (idle-left))
	(list "throw-right" (throw-right))
	(list "throw-left" (throw-left))
	(list "dodge-right" (dodge-right))
	(list "dodge-left" (dodge-left))
	(list "getup-right" (getup-right))
	(list "getup-left" (getup-left))
	(list "die-right" (die-right))
	(list "die-left" (die-left))
	(list "undie-right" (undie-right))
	(list "undie-left" (undie-left))))

(define (small-animations) (list
	(list "idle-right" (small-idle-right))
	(list "idle-left" (small-idle-left))
	(list "run-right" (small-run-right))
	(list "run-left" (small-run-left))
	(list "attack-right" (small-swing-right))
	(list "attack-left" (small-swing-left))))

(define (big-animations) (list
	(list "idle-right" (big-idle-right))
	(list "idle-left" (big-idle-left))
	(list "run-right" (big-run-right))
	(list "run-left" (big-run-left))
	(list "attack-right" (big-slam-right))
	(list "attack-left" (big-slam-left))))

(define (player-small-animations) (list
	(list "tpose-right" (small-idle-right))
	(list "tpose-left" (small-idle-left))
	(list "run-right" (small-run-right))
	(list "run-left" (small-run-left))
	(list "idle-special-right" (small-swing-right))
	(list "idle-special-left" (small-swing-left))
	(list "idle-gun-right" (small-idle-right))
	(list "idle-gun-left" (small-idle-left))
	(list "idle-right" (small-idle-right))
	(list "idle-left" (small-idle-left))
	(list "throw-right" (small-idle-right))
	(list "throw-left" (small-idle-left))
	(list "dodge-right" (small-idle-right))
	(list "dodge-left" (small-idle-left))
	(list "getup-right" (small-idle-right))
	(list "getup-left" (small-idle-left))
	(list "die-right" (small-idle-right))
	(list "die-left" (small-idle-left))
	(list "undie-right" (small-idle-right))
	(list "undie-left" (small-idle-left))))

(define (player-big-animations) (list
	(list "tpose-right" (big-idle-right))
	(list "tpose-left" (big-idle-left))
	(list "run-right" (big-run-right))
	(list "run-left" (big-run-left))
	(list "idle-special-right" (big-slam-right))
	(list "idle-special-left" (big-slam-left))
	(list "idle-gun-right" (big-idle-right))
	(list "idle-gun-left" (big-idle-left))
	(list "idle-right" (big-idle-right))
	(list "idle-left" (big-idle-left))
	(list "throw-right" (big-idle-right))
	(list "throw-left" (big-idle-left))
	(list "dodge-right" (big-idle-right))
	(list "dodge-left" (big-idle-left))
	(list "getup-right" (big-idle-right))
	(list "getup-left" (big-idle-left))
	(list "die-right" (big-idle-right))
	(list "die-left" (big-idle-left))
	(list "undie-right" (big-idle-right))
	(list "undie-left" (big-idle-left))))

(define (grenade) (create-sprite "/Assets/grenade.png" 0 0 16 16))
(define (bullet) (create-sprite "/Assets/bullet.png" 0 0 8 8))

(define (spawn-blood num x y)
  (let ((e (create-entity)))
	(set-component e 'Sprite (list (list-ref (blood-splatter) num) -20))
	(set-component e 'Bounds (list 16 16))
	(set-component e 'Position (list 
                              (+ (* (* (- (rand) 0.5) 2) 5) x) 
                              (+ (* (* (- (rand) 0.5) 2) 5) y)))
	e))

(define (spawn-blood-s x y)
  (let ((e (spawn-blood (floor (* (rand) 3)) x (+ y 20))))
	(set-component e 'DestroyTimer (list 5 0))))

(define (spawn-gibs x y)
  (let ((e (spawn-blood (floor (* (rand) 3)) x (+ y 20))))
	(set-component e 'DestroyTimer (list 5 0))))

(define (spawn-timed-animation sheet x y r t)
  (let ((e (create-entity)))
	(set-component e 'Sprite (list tpose-right 20))
	(set-component e 'AnimatedSpriteOnce (list sheet))
	(set-component e 'Bounds (list 8 8))
	(set-component e 'Position (list x y))
  (set-component e 'Rotation (list r))
  (set-component e 'DestroyTimer (list t 0))
	e))

(define (spawn-blood-spray x y dir-x dir-y r)
  (let ((e (create-entity)))
	(set-component e 'Sprite (list tpose-right 20))
	(set-component e 'AnimatedSpriteOnce (list (blood-spray-2)))
	(set-component e 'Bounds (list 16 16))
	(set-component e 'Position (list x y))
  (set-component e 'Rotation (list r))
  (set-component e 'SimPosition (list x y))
  (set-component e 'Velocity (list (* dir-x 100) (* dir-y 100)))
	;(set-component e 'PhysicsBody (list 'Circle 0.1 0.3 5 0 'dynamic))
 	;(set-component e 'SimCopy (list))
	(set-component e 'Spawner (list 0.1 0 "spawn-blood-s"))
  (set-component e 'DestroyTimer (list 0.2 0))
	e))

(define (spawn-hit-splash x y dir-x dir-y r)
  (let ((e (spawn-blood-spray x y dir-x dir-y r)))
	(set-component e 'AnimatedSpriteOnce (list (hit-splash-1)))
  (set-component e 'Velocity (list 0 0))
  (set-component e 'DestroyTimer (list 0.4 0))
  (remove-component e 'Spawner)
	e))

(define (spawn-spawner x y)
  (let ((e (create-entity)))
	(set-component e 'Sprite (list (list-ref (blood-splatter) 0) -20))
	(set-component e 'Bounds (list 16 16))
	(set-component e 'Position (list x y))
	(set-component e 'SimPosition (list x y))
	(set-component e 'Spawner (list 2 0 "spawn-small"))
 
	e))

(define (spawn-small-spawner x y)
  (let ((e (create-entity)))
	(set-component e 'Sprite (list (list-ref (blood-splatter) 0) -20))
	(set-component e 'Bounds (list 16 16))
	(set-component e 'Position (list x y))
	(set-component e 'SimPosition (list x y))
	(set-component e 'Spawner (list 2 0 "spawn-small"))
 
	e))

(define (spawn-big-spawner x y)
  (let ((e (create-entity)))
	(set-component e 'Sprite (list (list-ref (blood-splatter) 0) -20))
	(set-component e 'Bounds (list 16 16))
	(set-component e 'Position (list x y))
	(set-component e 'SimPosition (list x y))
	(set-component e 'Spawner (list 7 0 "spawn-big"))
	e))

(define (spawn-gun x y)
  (let ((e (create-entity)))
	(set-component e 'Sprite (list (create-sprite "/Assets/gun.png" 0 0 128 16) 20 -112 0))
	(set-component e 'Bounds (list 16 16))
	(set-component e 'Position (list x y))
	(set-component e 'SimPosition (list x y))
	(set-component e 'Rotation (list 0))
	(set-component e 'GunCombat (list 0 0)) ;HACK dummy component for tag, gun rotation
	e))

(define (spawn-box x y)
	  (let ((e (create-entity)))
		(set-component e 'Sprite (list (create-sprite "/Assets/crate.png" 0 0 8 8) 0))
		(set-component e 'Bounds (list 8 8))
		(set-component e 'Position (list x y))
		(set-component e 'SimPosition (list x y))
		(set-component e 'Velocity (list 0 0))
		(set-component e 'PhysicsBody (list 'Box 8 8 0.3 5 0 'dynamic))
	 	(set-component e 'SimCopy (list))
		e))

(define (spawn-bullet x y dir-x dir-y r)
	  (let ((e (create-entity)))
		(set-component e 'Sprite (list (bullet) 0))
		(set-component e 'Bounds (list 8 8))
		(set-component e 'Position (list x y))
		(set-component e 'SimPosition (list x y))
		(set-component e 'DestroyTimer (list 1 0))
		(set-component e 'Rotation (list r))
		(set-component e 'Velocity (list (* dir-x 250) (* dir-y 250)))
		(set-component e 'PhysicsBody (list 'Circle 1 0.3 5 0 'dynamic))
	 	(set-component e 'SimCopy (list))
	 	(set-component e 'OverlapDamage (list 100 50 e))
   
   	(spawn-timed-animation (hit-splash-2) 
                           (+ (* dir-x 3) x) 
                           (+ (* dir-y 3) y)
                           (+ 180 r) 0.4)
   
		e))

(define (spawn-player x y)
	  (let ((e (create-entity)) 
          (gun (spawn-gun x y)))
		(set-component e 'Sprite (list tpose-right 10))
		(set-component e 'AnimatedSprite (list (run-right)))
		(set-component e 'Bounds (list 12 24))
		(set-component e 'Position (list x y))
		(set-component e 'SimPosition (list x y))
		(set-component e 'Velocity (list 0 0))
		(set-component e 'PlayerMovement '())
		(set-component e 'PlayerInput (list 150))
		(set-component e 'Health (list 1000))
		(set-component e 'GunCombat (list 75 75))
		(set-component e 'AnimationSet (player-animations))
		(set-component e 'CameraFocus (list 6 0))
  
		;(set-component e 'Spawner (list 0.1 0 "spawn-blood-s"))
  
		(set-component e 'Friction (list 5 1))
		(set-component e 'PlayerAttachment (list gun 0 0))
		(set-component e 'PhysicsBody (list 'Circle 4 0.3 1 8 'kinematic))
  	(parent-entity e gun)
		e))

(define (spawn-player-nogun x y)
	  (let ((e (create-entity)))
		(set-component e 'Sprite (list tpose-right 10))
		(set-component e 'AnimatedSprite (list (run-right)))
		(set-component e 'Bounds (list 12 24))
		(set-component e 'Position (list x y))
		(set-component e 'SimPosition (list x y))
		(set-component e 'Velocity (list 0 0))
		(set-component e 'PlayerMovement '())
		(set-component e 'PlayerInput (list 150))
		(set-component e 'Health (list 1000))
		(set-component e 'AnimationSet (player-animations))
		(set-component e 'CameraFocus (list 6 0))
		(set-component e 'Friction (list 5 1))
		;(set-component e 'PhysicsBody (list 'Circle 4 0.3 1 8 'kinematic))
		e))

(define (spawn-small-player x y)
	  (let ((e (spawn-player-nogun x y)))
		(set-component e 'PlayerInput (list 75))
		(set-component e 'Bounds (list 24 24))
		(set-component e 'AnimationSet (player-small-animations))
		(set-component e 'PhysicsBody (list 'Circle 4 0.3 1 6 'kinematic))
		e))

(define (spawn-big-player x y)
	  (let ((e (spawn-player-nogun x y)))
		(set-component e 'Bounds (list 48 48))
		(set-component e 'PlayerInput (list 25))
		(set-component e 'AnimationSet (player-big-animations))
		(set-component e 'PhysicsBody (list 'Circle 8 0.3 1 -10 'kinematic))
		e))

(define (spawn-small x y)
	  (let ((e (create-entity)))
		(set-component e 'Sprite (list tpose-right 10))
		(set-component e 'AnimatedSprite (list (run-right)))
		(set-component e 'Bounds (list 24 24))
		(set-component e 'Position (list x y))
		(set-component e 'SimPosition (list x y))
		(set-component e 'Velocity (list 0 0))
		(set-component e 'AIState '())
		(set-component e 'NPCMovement (list 75))
		(set-component e 'NPCCombat (list 20000 20 3 0.8 100))
		(set-component e 'Health (list 500))
		(set-component e 'AnimationSet (small-animations))
		(set-component e 'Friction (list 5 1))
		(set-component e 'PhysicsBody (list 'Circle 4 0.3 5 6 'dynamic))
	 	(set-component e 'SimCopy (list))

		;(set-component e 'Spawner (list 0.1 0 "spawn-blood-s"))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(spawn-small %f %f)")))
  
		e))

(define (spawn-big x y)
	  (let ((e (create-entity)))
		(set-component e 'Sprite (list tpose-right 10))
		(set-component e 'AnimatedSprite (list (run-right)))
		(set-component e 'Bounds (list 48 48))
		(set-component e 'Position (list x y))
		(set-component e 'SimPosition (list x y))
		(set-component e 'Velocity (list 0 0))
		(set-component e 'AIState)
		(set-component e 'NPCMovement (list 25))
		(set-component e 'NPCCombat (list 20000 40 3 0.7 500))
		(set-component e 'Health (list 8000))
		(set-component e 'AnimationSet (big-animations))
		(set-component e 'Friction (list 5 1))
		(set-component e 'PhysicsBody (list 'Circle 8 0.3 15 -10 'dynamic))
	 	(set-component e 'SimCopy (list))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(spawn-big %f %f)")))

   e))

(define player 0)

(define (become-small) 
  (begin 
    (set-component player 'AnimationSet (player-small-animations))
		(set-component player 'Bounds (list 24 24))
    (set-component player 'PlayerInput (list 25))))
(define (become-plr) 
  (begin 
    (set-component player 'AnimationSet (player-animations))
		(set-component player 'Bounds (list 12 24))
    (set-component player 'PlayerInput (list 150))))



	(define crate (create-sprite "/Assets/crate.png" 0 0 8 8))

;(define box (let ((e (create-entity)))
;	(set-component e 'Sprite (list (create-sprite "/Assets/crate.png" 0 0 8 8) 0))
;	(set-component e 'Bounds (list 8 8))
;	(set-component e 'Position (list 40 40))
;	(set-component e 'SimPosition (list 40 40))
;	(set-component e 'Velocity (list 0 0))
;	;(set-component e 'CameraFocus (list 6 0))
;	;(set-component e 'PlayerInput (list 150))
;	(set-component e 'PlayerMovement '())
;	;(set-component e 'Friction (list 5 1))
;	(set-component e 'PhysicsBody (list 'Box 8 8 0.3 5 0 'dynamic))
; 	(set-component e 'SimCopy (list))
;	e))

;spawn blood sprays for testing
;(define ent (let ((e (create-entity)))
;	(set-component e 'Sprite (list tpose-right 20))
;	(set-component e 'AnimatedSprite (list (blood-spray-1)))
;	(set-component e 'Bounds (list 16 16))
;	(set-component e 'Position (list 40 0))
;	e))

;(define ent (let ((e (create-entity)))
;	(set-component e 'Sprite (list tpose-right 20))
;	(set-component e 'AnimatedSprite (list (blood-spray-2)))
;	(set-component e 'Bounds (list 16 16))
;	(set-component e 'Position (list 60 0))
;	e))
 


(define (pressed-5 x y)
  (begin 
    (write x)
    (write y)
    (newline)))

(bind-keycode 31 pressed-5)

(define (make-editor-tiles file w h)
(let ((t (make-tiles file 8 w h)) (l '()))
  (for 0 (length t) 1 
       (begin	
       	(write (list-ref t i))

       	(set! l (append 
                  (list 
                    (let ((ii i))
                    (lambda (x y)
                      (place-tile file i x y)
                      ))) l))
       	(newline))) 
  l))


(define ghost 0)
(define prefabIndex 0)
(define tile-mode #f)

(define ht (make-hash-table))
;(set! (ht "40 40") 0)
;(ht "40 41")


;(define (get-crate (create-sprite "/Assets/crate.png" 0 0 8 8)))


(define (placeholder x y)
  (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-barrel) 10))
		(set-component e 'Bounds (list 7 11))
		(set-component e 'Position (list x y))))


(define (get-barrel) (create-sprite "/Assets/Props/barrel.png" 0 0 7 11))
(define (create-barrel x y)
  (let ((e (create-entity)))
		(set-component e 'Sprite (list tpose-right 10))
		(set-component e 'Bounds (list 7 11))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(create-barrel %f %f)")))
		e))

(define (get-blockade1) (create-sprite "/Assets/Props/blockade1.png" 0 0 15 8))
(define (create-blockade1 x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-blockade1) 0))
		(set-component e 'Bounds (list 15 8))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-blockade1 %f %f)")))
		e))

(define (get-blockade2) (create-sprite "/Assets/Props/blockade2.png" 0 0 12 14))
(define (create-blockade2 x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-blockade2) 0))
		(set-component e 'Bounds (list 12 14))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-blockade2 %f %f)")))
		e))

(define (get-blockade3) (create-sprite "/Assets/Props/blockade3.png" 0 0 31 16))
(define (create-blockade3 x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-blockade3) 0))
		(set-component e 'Bounds (list 31 16))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-blockade3 %f %f)")))
		e))

(define (get-blockade4) (create-sprite "/Assets/Props/blockade4.png" 0 0 16 26))
(define (create-blockade4 x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-blockade4) 0))
		(set-component e 'Bounds (list 16 26))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-blockade4 %f %f)")))
		e))

(define (get-blockade5) (create-sprite "/Assets/Props/blockade5.png" 0 0 16 26))
(define (create-blockade5 x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-blockade5) 0))
		(set-component e 'Bounds (list 16 26))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-blockade5 %f %f)")))
		e))

(define (get-bus) (create-sprite "/Assets/Props/bus.png" 0 0 63 38))
(define (create-bus x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-bus) 0))
		(set-component e 'Bounds (list 63 38))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-bus %f %f)")))
		e))

(define (get-pole1) (create-sprite "/Assets/Props/pole1.png" 0 0 4 56))
(define (create-pole1 x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-pole1) 0))
		(set-component e 'Bounds (list 4 56))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-pole1 %f %f)")))
		e))

(define (get-pole2) (create-sprite "/Assets/Props/pole2.png" 0 0 21 40))
(define (create-pole2 x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-pole2) 0))
		(set-component e 'Bounds (list 21 40))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-pole2 %f %f)")))
		e))

(define (get-pole3) (create-sprite "/Assets/Props/pole3.png" 0 0 21 39))
(define (create-pole3 x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-pole3) 0))
		(set-component e 'Bounds (list 21 39))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-pole3 %f %f)")))
		e))

(define (get-pole4) (create-sprite "/Assets/Props/pole4.png" 0 0 6 40))
(define (create-pole4 x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-pole4) 0))
		(set-component e 'Bounds (list 6 40))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-pole4 %f %f)")))
		e))

(define (get-pole5) (create-sprite "/Assets/Props/pole5.png" 0 0 4 39))
(define (create-pole5 x y) (let ((e (create-entity)))
		(set-component e 'Sprite (list (get-pole5) 0))
		(set-component e 'Bounds (list 4 39))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list "(get-pole5 %f %f)")))
		e))

(define (get-sign) (create-sprite "/Assets/Props/sign.png" 0 0 10 6))
(define (create-sign x y) (placeholder x y))

(define (get-sign1) (create-sprite "/Assets/Props/sign1.png" 0 0 8 8))
(define (create-sign1 x y) (placeholder x y))

(define (get-sign2) (create-sprite "/Assets/Props/sign2.png" 0 0 8 8))
(define (create-sign2 x y) (placeholder x y))

(define (get-vine1) (create-sprite "/Assets/Props/vine1.png" 0 0 19 40))
(define (create-vine1 x y) (placeholder x y))

(define (get-vine2) (create-sprite "/Assets/Props/vine2.png" 0 0 15 20))
(define (create-vine2 x y) (placeholder x y))

(define (get-vine3) (create-sprite "/Assets/Props/vine3.png" 0 0 22 27))
(define (create-vine3 x y) (placeholder x y))

(define (get-vine4) (create-sprite "/Assets/Props/vine4.png" 0 0 18 26))
(define (create-vine4 x y) (placeholder x y))

(define (get-bricks) (create-sprite "/Assets/rubble/bricks.png" 0 0 40 16))
(define (create-bricks x y) (placeholder x y))

(define (get-rubble1) (create-sprite "/Assets/rubble/rubble1.png" 0 0 11 19))
(define (create-rubble1 x y) (placeholder x y))

(define (get-rubble2) (create-sprite "/Assets/rubble/rubble2.png" 0 0 10 21))
(define (create-rubble2 x y) (placeholder x y))

(define (get-rubble3) (create-sprite "/Assets/rubble/rubble3.png" 0 0 19 11))
(define (create-rubble3 x y) (placeholder x y))

(define (get-rubble4) (create-sprite "/Assets/rubble/rubble4.png" 0 0 19 9))
(define (create-rubble4 x y) (placeholder x y))

(define (get-rubble5) (create-sprite "/Assets/rubble/rubble5.png" 0 0 18 10))
(define (create-rubble5 x y) (placeholder x y))

(define (get-rubble6) (create-sprite "/Assets/rubble/rubble6.png" 0 0 17 11))
(define (create-rubble6 x y) (placeholder x y))

(define (get-rubble7) (create-sprite "/Assets/rubble/rubble7.png" 0 0 15 19))
(define (create-rubble7 x y) (placeholder x y))

(define (get-rubble8) (create-sprite "/Assets/rubble/rubble8.png" 0 0 15 19))
(define (create-rubble8 x y) (placeholder x y))





(define prefabs 
	(list
    
;spawn func
create-barrel
create-blockade1
create-blockade2
create-blockade3
create-blockade4
create-blockade5
create-bus
create-pole1
create-pole2
create-pole3
create-pole4
create-pole5
create-sign
create-sign1
create-sign2
create-vine1
create-vine2
create-vine3
create-vine4
create-bricks
create-rubble1
create-rubble2
create-rubble3
create-rubble4
create-rubble5
create-rubble6
create-rubble7
create-rubble8

    ))

(define prefab-ghosts
  (list
;sprites
(get-barrel)
(get-blockade1)
(get-blockade2)
(get-blockade3)
(get-blockade4)
(get-blockade5)
(get-bus)
(get-pole1)
(get-pole2)
(get-pole3)
(get-pole4)
(get-pole5)
(get-sign)
(get-sign1)
(get-sign2)
(get-vine1)
(get-vine2)
(get-vine3)
(get-vine4)
(get-bricks)
(get-rubble1) 
(get-rubble2) 
(get-rubble3) 
(get-rubble4) 
(get-rubble5) 
(get-rubble6) 
(get-rubble7) 
(get-rubble8) 


    tpose-right
    (grenade)


    ))


(define (tile-ghosts2)
  (make-tiles "tileset.png" 8 160 64))
  ;(append  
  ;  (make-tiles "tileset.png" 8 80 80)
  ;  ;(make-tiles "floors.png" 8 80 80)
  ;  ))

(define tile-ghosts
  (tile-ghosts2))

(define (key-xy x y)
  (string-append 
    (number->string x)
    " "
    (number->string y)))

(define (place-tile i x y)
  (let ((e (create-entity)) (k (key-xy x y)))
    (if (ht k)
        ;remove existing ent
        (begin 
          (delete-entity (first (ht k)))
          (delete-entity (second (ht k)))))
    
		(set-component e 'Sprite (list (list-ref (tile-ghosts2) i) -1000))
		(set-component e 'Bounds (list 8 8))
		(set-component e 'Position (list x y))

		(let ((m (create-entity)))
			(set-component m 'Position (list x y))
			(set-component m 'Marker (list 
	                              (string-append
	                                "(place-tile "
	                                (number->string i)
	                                " %f %f)")))
   
  	(set! (ht (key-xy x y)) (list e m i))
		e)))



(define (editor-place x y tx ty)
	(if tile-mode 
     (begin
      	(place-tile prefabIndex tx ty))
     (begin
       	(write (list-ref prefabs prefabIndex))
     		(apply (list-ref prefabs prefabIndex) (list x y)))))

(define (editor-pick x y tx ty)
	(if tile-mode 
     (begin
      	(let ((k (key-xy tx ty)))
         	(if (ht k)
              (begin 
                (set! prefabIndex (third (ht k)))
                (update-tile-ghost))))
       
       )))

(define (editor-undo)
  (if tile-mode
      (set! tile-mode	#f)
      (set! tile-mode	#t))
  (display "undo ")
  (display tile-mode)
  (newline)
)

(define (update-ghost)
  (set-component ghost 'Sprite (list (list-ref prefab-ghosts prefabIndex) 100))
  )

(define (update-tile-ghost)
  (set-component ghost 'Sprite (list (list-ref tile-ghosts prefabIndex) 100))
  )

(define (editor-scroll-up)
  (if tile-mode 
      (begin
      	(set! prefabIndex (min (+ prefabIndex 1) (- (length tile-ghosts) 1)))
      	(update-tile-ghost))
      (begin 
        (set! prefabIndex (min (+ prefabIndex 1) (- (length prefabs) 1)))
      	(update-ghost))))

(define (editor-scroll-down)
	(if tile-mode 
      (begin
      	(set! prefabIndex (max (- prefabIndex 1) 0))
      	(update-tile-ghost))
      (begin 
        (set! prefabIndex (max (- prefabIndex 1) 0))
      	(update-ghost))))


;(define title 
;	(let ((e (create-entity)))
;		(set-component e 'Sprite (list (create-sprite "/Assets/titlecard.png" 0 0 200 113) 0))
;		(set-component e 'Bounds (list 200 113))
;		(set-component e 'Position (list 100 50))
;  e))


(define (load-shit)
  
  
  
;;;;;;;;;;;;;;;;;;;;;;;;;
;; EXPORT GOES HERE    ;;
;;;;;;;;;;;;;;;;;;;;;;;;;
  
  
  
  (spawn-small 38.250000 87.750000)
(spawn-small -81.750000 20.249996)
(spawn-small -81.750000 20.249996)
(spawn-small -81.750000 20.249996)
(spawn-small -81.750000 20.249996)
(spawn-small -81.750000 20.249996)
(place-tile 34 56.000000 8.000000)
(place-tile 34 -32.000000 40.000000)
(place-tile 26 -16.000000 16.000000)
(place-tile 27 -8.000000 16.000000)
(place-tile 34 0.000000 8.000000)
(place-tile 35 40.000000 40.000000)
(place-tile 34 16.000000 8.000000)
(place-tile 34 24.000000 8.000000)
(place-tile 35 48.000000 8.000000)
(place-tile 34 40.000000 8.000000)
(place-tile 35 32.000000 16.000000)
(place-tile 31 -24.000000 8.000000)
(place-tile 32 -32.000000 16.000000)
(place-tile 33 -24.000000 16.000000)
(place-tile 30 -32.000000 8.000000)
(place-tile 27 -8.000000 24.000000)
(place-tile 35 8.000000 32.000000)
(place-tile 34 0.000000 16.000000)
(place-tile 34 8.000000 16.000000)
(place-tile 35 32.000000 8.000000)
(place-tile 34 24.000000 16.000000)
(place-tile 34 8.000000 8.000000)
(place-tile 29 -40.000000 0.000000)
(place-tile 13 56.000000 0.000000)
(place-tile 12 40.000000 0.000000)
(place-tile 13 16.000000 0.000000)
(place-tile 12 24.000000 0.000000)
(place-tile 13 8.000000 0.000000)
(place-tile 12 0.000000 0.000000)
(place-tile 12 -8.000000 0.000000)
(place-tile 34 96.000000 32.000000)
(place-tile 13 32.000000 0.000000)
(place-tile 4 -16.000000 -40.000000)
(place-tile 29 -24.000000 0.000000)
(place-tile 29 -32.000000 0.000000)
(place-tile 12 64.000000 0.000000)
(place-tile 34 -40.000000 16.000000)
(place-tile 34 -48.000000 24.000000)
(place-tile 34 -40.000000 40.000000)
(place-tile 34 -24.000000 40.000000)
(place-tile 34 -56.000000 40.000000)
(place-tile 34 -56.000000 8.000000)
(place-tile 34 -56.000000 24.000000)
(place-tile 34 -40.000000 8.000000)
(place-tile 35 -32.000000 32.000000)
(place-tile 34 -48.000000 40.000000)
(place-tile 27 72.000000 32.000000)
(place-tile 35 -32.000000 24.000000)
(place-tile 26 -16.000000 8.000000)
(place-tile 26 -16.000000 24.000000)
(place-tile 26 -16.000000 32.000000)
(place-tile 26 -16.000000 40.000000)
(place-tile 27 -8.000000 40.000000)
(place-tile 27 -8.000000 32.000000)
(place-tile 27 -8.000000 8.000000)
(place-tile 34 -48.000000 16.000000)
(place-tile 34 -56.000000 16.000000)
(place-tile 34 -72.000000 16.000000)
(place-tile 34 -48.000000 8.000000)
(place-tile 34 -64.000000 8.000000)
(place-tile 34 -64.000000 16.000000)
(place-tile 35 -40.000000 24.000000)
(place-tile 34 -48.000000 32.000000)
(place-tile 35 -40.000000 32.000000)
(place-tile 34 -24.000000 32.000000)
(place-tile 35 -64.000000 24.000000)
(place-tile 34 48.000000 16.000000)
(place-tile 34 0.000000 32.000000)
(place-tile 35 48.000000 32.000000)
(place-tile 34 16.000000 32.000000)
(place-tile 34 24.000000 32.000000)
(place-tile 34 32.000000 32.000000)
(place-tile 34 40.000000 32.000000)
(place-tile 35 16.000000 16.000000)
(place-tile 35 32.000000 40.000000)
(place-tile 34 0.000000 40.000000)
(place-tile 35 -56.000000 32.000000)
(place-tile 34 24.000000 40.000000)
(place-tile 34 16.000000 40.000000)
(place-tile 34 8.000000 40.000000)
(place-tile 27 72.000000 24.000000)
(place-tile 35 48.000000 40.000000)
(place-tile 35 56.000000 40.000000)
(place-tile 26 64.000000 32.000000)
(place-tile 34 80.000000 40.000000)
(place-tile 34 88.000000 40.000000)
(place-tile 34 88.000000 32.000000)
(place-tile 34 80.000000 32.000000)
(place-tile 35 56.000000 32.000000)
(place-tile 26 64.000000 24.000000)
(place-tile 34 40.000000 16.000000)
(place-tile 34 56.000000 16.000000)
(place-tile 26 64.000000 8.000000)
(place-tile 27 72.000000 8.000000)
(place-tile 27 72.000000 16.000000)
(place-tile 35 80.000000 16.000000)
(place-tile 34 88.000000 8.000000)
(place-tile 34 80.000000 8.000000)
(place-tile 26 64.000000 40.000000)
(place-tile 34 80.000000 24.000000)
(place-tile 35 -24.000000 24.000000)
(place-tile 23 0.000000 24.000000)
(place-tile 24 8.000000 24.000000)
(place-tile 24 16.000000 24.000000)
(place-tile 24 24.000000 24.000000)
(place-tile 24 32.000000 24.000000)
(place-tile 24 40.000000 24.000000)
(place-tile 24 48.000000 24.000000)
(place-tile 24 56.000000 24.000000)
(place-tile 26 64.000000 16.000000)
(place-tile 27 192.000000 16.000000)
(place-tile 18 -16.000000 0.000000)
(place-tile 5 -16.000000 -8.000000)
(place-tile 4 -16.000000 -16.000000)
(place-tile 5 -16.000000 -48.000000)
(place-tile 4 -16.000000 -32.000000)
(place-tile 29 -48.000000 0.000000)
(place-tile 29 -56.000000 0.000000)
(place-tile 35 -24.000000 -16.000000)
(place-tile 28 -40.000000 -8.000000)
(place-tile 28 -56.000000 -8.000000)
(place-tile 5 -16.000000 -24.000000)
(place-tile 35 -56.000000 -16.000000)
(place-tile 35 -56.000000 -24.000000)
(place-tile 35 -56.000000 -32.000000)
(place-tile 35 -56.000000 -40.000000)
(place-tile 28 -48.000000 -56.000000)
(place-tile 29 -40.000000 -48.000000)
(place-tile 35 -48.000000 -40.000000)
(place-tile 35 -48.000000 -32.000000)
(place-tile 35 -48.000000 -24.000000)
(place-tile 35 -48.000000 -16.000000)
(place-tile 35 -32.000000 -16.000000)
(place-tile 35 -32.000000 -24.000000)
(place-tile 35 -32.000000 -32.000000)
(place-tile 35 -32.000000 -40.000000)
(place-tile 29 -24.000000 -48.000000)
(place-tile 28 -56.000000 -56.000000)
(place-tile 35 -24.000000 -40.000000)
(place-tile 35 -24.000000 -32.000000)
(place-tile 35 -24.000000 -24.000000)
(place-tile 28 -32.000000 -8.000000)
(place-tile 28 -48.000000 -8.000000)
(place-tile 21 -40.000000 -16.000000)
(place-tile 21 -40.000000 -24.000000)
(place-tile 21 -40.000000 -32.000000)
(place-tile 21 -40.000000 -40.000000)
(place-tile 29 -32.000000 -48.000000)
(place-tile 28 -32.000000 -56.000000)
(place-tile 59 -8.000000 -8.000000)
(place-tile 59 -8.000000 -16.000000)
(place-tile 60 0.000000 -8.000000)
(place-tile 65 0.000000 -16.000000)
(place-tile 63 8.000000 -16.000000)
(place-tile 63 8.000000 -8.000000)
(place-tile 53 8.000000 -24.000000)
(place-tile 56 0.000000 -24.000000)
(place-tile 54 -8.000000 -24.000000)
(place-tile 46 16.000000 -8.000000)
(place-tile 46 24.000000 -8.000000)
(place-tile 46 32.000000 -8.000000)
(place-tile 46 40.000000 -8.000000)
(place-tile 46 48.000000 -8.000000)
(place-tile 46 56.000000 -8.000000)
(place-tile 46 56.000000 -16.000000)
(place-tile 46 48.000000 -16.000000)
(place-tile 46 40.000000 -16.000000)
(place-tile 46 32.000000 -16.000000)
(place-tile 46 24.000000 -16.000000)
(place-tile 46 16.000000 -16.000000)
(place-tile 45 16.000000 -24.000000)
(place-tile 45 24.000000 -24.000000)
(place-tile 45 32.000000 -24.000000)
(place-tile 45 40.000000 -24.000000)
(place-tile 45 48.000000 -24.000000)
(place-tile 45 56.000000 -24.000000)
(place-tile 84 64.000000 -24.000000)
(place-tile 86 64.000000 -16.000000)
(place-tile 86 64.000000 -8.000000)
(place-tile 36 48.000000 -96.000000)
(place-tile 36 24.000000 -96.000000)
(place-tile 73 -8.000000 -72.000000)
(place-tile 73 -8.000000 -80.000000)
(place-tile 77 -8.000000 -64.000000)
(place-tile 73 -8.000000 -56.000000)
(place-tile 73 -8.000000 -48.000000)
(place-tile 77 -8.000000 -40.000000)
(place-tile 73 -8.000000 -96.000000)
(place-tile 36 0.000000 -32.000000)
(place-tile 41 16.000000 -64.000000)
(place-tile 36 0.000000 -48.000000)
(place-tile 36 0.000000 -56.000000)
(place-tile 36 24.000000 -80.000000)
(place-tile 36 0.000000 -72.000000)
(place-tile 36 0.000000 -80.000000)
(place-tile 36 0.000000 -88.000000)
(place-tile 36 0.000000 -96.000000)
(place-tile 39 8.000000 -96.000000)
(place-tile 39 8.000000 -88.000000)
(place-tile 37 0.000000 -64.000000)
(place-tile 39 8.000000 -72.000000)
(place-tile 37 48.000000 -88.000000)
(place-tile 39 8.000000 -64.000000)
(place-tile 39 8.000000 -56.000000)
(place-tile 39 8.000000 -48.000000)
(place-tile 39 8.000000 -40.000000)
(place-tile 36 16.000000 -32.000000)
(place-tile 36 24.000000 -48.000000)
(place-tile 74 64.000000 -96.000000)
(place-tile 39 8.000000 -80.000000)
(place-tile 37 0.000000 -40.000000)
(place-tile 36 16.000000 -72.000000)
(place-tile 41 16.000000 -88.000000)
(place-tile 40 32.000000 -96.000000)
(place-tile 36 16.000000 -56.000000)
(place-tile 82 64.000000 -64.000000)
(place-tile 39 8.000000 -32.000000)
(place-tile 37 40.000000 -32.000000)
(place-tile 36 56.000000 -96.000000)
(place-tile 37 56.000000 -32.000000)
(place-tile 36 56.000000 -80.000000)
(place-tile 42 24.000000 -64.000000)
(place-tile 77 -8.000000 -88.000000)
(place-tile 82 64.000000 -88.000000)
(place-tile 76 64.000000 -32.000000)
(place-tile 36 56.000000 -48.000000)
(place-tile 74 64.000000 -56.000000)
(place-tile 74 64.000000 -48.000000)
(place-tile 74 64.000000 -72.000000)
(place-tile 74 64.000000 -80.000000)
(place-tile 73 -8.000000 -32.000000)
(place-tile 36 48.000000 -72.000000)
(place-tile 36 40.000000 -96.000000)
(place-tile 36 16.000000 -80.000000)
(place-tile 40 32.000000 -64.000000)
(place-tile 36 16.000000 -96.000000)
(place-tile 40 32.000000 -80.000000)
(place-tile 36 40.000000 -88.000000)
(place-tile 43 56.000000 -40.000000)
(place-tile 36 48.000000 -64.000000)
(place-tile 40 32.000000 -88.000000)
(place-tile 40 32.000000 -72.000000)
(place-tile 36 40.000000 -80.000000)
(place-tile 36 16.000000 -48.000000)
(place-tile 36 56.000000 -72.000000)
(place-tile 36 48.000000 -32.000000)
(place-tile 36 56.000000 -56.000000)
(place-tile 41 16.000000 -40.000000)
(place-tile 36 40.000000 -56.000000)
(place-tile 40 32.000000 -56.000000)
(place-tile 36 48.000000 -56.000000)
(place-tile 36 40.000000 -48.000000)
(place-tile 36 48.000000 -40.000000)
(place-tile 40 32.000000 -32.000000)
(place-tile 36 40.000000 -40.000000)
(place-tile 40 32.000000 -48.000000)
(place-tile 36 24.000000 -56.000000)
(place-tile 43 56.000000 -64.000000)
(place-tile 42 24.000000 -88.000000)
(place-tile 42 24.000000 -40.000000)
(place-tile 36 24.000000 -72.000000)
(place-tile 36 24.000000 -32.000000)
(place-tile 36 40.000000 -64.000000)
(place-tile 40 32.000000 -40.000000)
(place-tile 37 40.000000 -72.000000)
(place-tile 82 64.000000 -40.000000)
(place-tile 36 48.000000 -48.000000)
(place-tile 36 48.000000 -80.000000)
(place-tile 43 56.000000 -88.000000)
(place-tile 99 64.000000 -104.000000)
(place-tile 100 64.000000 -112.000000)
(place-tile 100 64.000000 -120.000000)
(place-tile 100 64.000000 -128.000000)
(place-tile 94 56.000000 -136.000000)
(place-tile 98 56.000000 -104.000000)
(place-tile 101 40.000000 -112.000000)
(place-tile 101 32.000000 -112.000000)
(place-tile 101 24.000000 -112.000000)
(place-tile 101 56.000000 -112.000000)
(place-tile 101 56.000000 -120.000000)
(place-tile 101 56.000000 -128.000000)
(place-tile 94 48.000000 -136.000000)
(place-tile 94 40.000000 -136.000000)
(place-tile 94 32.000000 -136.000000)
(place-tile 94 24.000000 -136.000000)
(place-tile 94 16.000000 -136.000000)
(place-tile 94 8.000000 -136.000000)
(place-tile 94 0.000000 -136.000000)
(place-tile 93 -8.000000 -136.000000)
(place-tile 101 0.000000 -128.000000)
(place-tile 101 0.000000 -120.000000)
(place-tile 101 0.000000 -112.000000)
(place-tile 101 8.000000 -112.000000)
(place-tile 98 24.000000 -104.000000)
(place-tile 101 16.000000 -120.000000)
(place-tile 101 8.000000 -120.000000)
(place-tile 101 24.000000 -120.000000)
(place-tile 101 32.000000 -120.000000)
(place-tile 101 40.000000 -120.000000)
(place-tile 101 48.000000 -120.000000)
(place-tile 101 48.000000 -128.000000)
(place-tile 101 40.000000 -128.000000)
(place-tile 101 32.000000 -128.000000)
(place-tile 101 24.000000 -128.000000)
(place-tile 101 16.000000 -128.000000)
(place-tile 101 8.000000 -128.000000)
(place-tile 95 64.000000 -136.000000)
(place-tile 96 -8.000000 -128.000000)
(place-tile 96 -8.000000 -120.000000)
(place-tile 96 -8.000000 -112.000000)
(place-tile 97 -8.000000 -104.000000)
(place-tile 98 0.000000 -104.000000)
(place-tile 98 8.000000 -104.000000)
(place-tile 98 16.000000 -104.000000)
(place-tile 101 48.000000 -112.000000)
(place-tile 98 32.000000 -104.000000)
(place-tile 98 40.000000 -104.000000)
(place-tile 98 48.000000 -104.000000)
(place-tile 101 16.000000 -112.000000)
(place-tile 13 48.000000 0.000000)
(place-tile 19 72.000000 0.000000)
(place-tile 9 72.000000 -32.000000)
(place-tile 8 72.000000 -8.000000)
(place-tile 8 72.000000 -40.000000)
(place-tile 8 72.000000 -16.000000)
(place-tile 9 72.000000 -48.000000)
(place-tile 9 72.000000 -24.000000)
(place-tile 17 72.000000 -56.000000)
(place-tile 16 -16.000000 -56.000000)
(place-tile 28 -24.000000 -8.000000)
(place-tile 28 80.000000 -8.000000)
(place-tile 28 88.000000 -8.000000)
(place-tile 28 96.000000 -8.000000)
(place-tile 28 104.000000 -8.000000)
(place-tile 4 112.000000 -8.000000)
(place-tile 85 120.000000 -8.000000)
(place-tile 29 80.000000 0.000000)
(place-tile 29 88.000000 0.000000)
(place-tile 29 96.000000 0.000000)
(place-tile 29 104.000000 0.000000)
(place-tile 4 112.000000 -40.000000)
(place-tile 13 120.000000 0.000000)
(place-tile 35 88.000000 16.000000)
(place-tile 34 88.000000 24.000000)
(place-tile 26 112.000000 40.000000)
(place-tile 34 128.000000 16.000000)
(place-tile 35 96.000000 16.000000)
(place-tile 34 88.000000 -24.000000)
(place-tile 35 96.000000 24.000000)
(place-tile 35 96.000000 8.000000)
(place-tile 35 104.000000 8.000000)
(place-tile 26 112.000000 8.000000)
(place-tile 26 112.000000 16.000000)
(place-tile 18 112.000000 0.000000)
(place-tile 27 72.000000 40.000000)
(place-tile 34 104.000000 16.000000)
(place-tile 35 96.000000 40.000000)
(place-tile 35 104.000000 40.000000)
(place-tile 34 104.000000 24.000000)
(place-tile 35 104.000000 32.000000)
(place-tile 28 232.000000 -8.000000)
(place-tile 34 104.000000 -16.000000)
(place-tile 34 104.000000 -24.000000)
(place-tile 34 104.000000 -32.000000)
(place-tile 29 96.000000 -48.000000)
(place-tile 28 96.000000 -56.000000)
(place-tile 34 104.000000 -64.000000)
(place-tile 34 104.000000 -40.000000)
(place-tile 34 96.000000 -16.000000)
(place-tile 34 88.000000 -16.000000)
(place-tile 34 80.000000 -16.000000)
(place-tile 34 80.000000 -24.000000)
(place-tile 34 80.000000 -32.000000)
(place-tile 34 80.000000 -40.000000)
(place-tile 34 80.000000 -80.000000)
(place-tile 27 72.000000 -96.000000)
(place-tile 34 80.000000 -64.000000)
(place-tile 26 -16.000000 -96.000000)
(place-tile 27 72.000000 -64.000000)
(place-tile 34 80.000000 -72.000000)
(place-tile 34 88.000000 -72.000000)
(place-tile 34 96.000000 -72.000000)
(place-tile 34 96.000000 -64.000000)
(place-tile 28 88.000000 -56.000000)
(place-tile 29 88.000000 -48.000000)
(place-tile 12 160.000000 0.000000)
(place-tile 34 96.000000 -24.000000)
(place-tile 34 96.000000 -32.000000)
(place-tile 34 88.000000 -40.000000)
(place-tile 29 80.000000 -48.000000)
(place-tile 28 80.000000 -56.000000)
(place-tile 34 88.000000 -64.000000)
(place-tile 34 88.000000 -32.000000)
(place-tile 26 112.000000 32.000000)
(place-tile 26 112.000000 24.000000)
(place-tile 27 120.000000 16.000000)
(place-tile 3 32.000000 48.000000)
(place-tile 3 0.000000 48.000000)
(place-tile 26 184.000000 40.000000)
(place-tile 3 8.000000 48.000000)
(place-tile 3 16.000000 48.000000)
(place-tile 2 24.000000 48.000000)
(place-tile 3 56.000000 48.000000)
(place-tile 3 40.000000 48.000000)
(place-tile 3 48.000000 48.000000)
(place-tile 3 -8.000000 48.000000)
(place-tile 101 120.000000 64.000000)
(place-tile 2 64.000000 48.000000)
(place-tile 94 8.000000 56.000000)
(place-tile 94 16.000000 56.000000)
(place-tile 94 24.000000 56.000000)
(place-tile 94 32.000000 56.000000)
(place-tile 94 40.000000 56.000000)
(place-tile 94 48.000000 56.000000)
(place-tile 94 56.000000 56.000000)
(place-tile 94 64.000000 56.000000)
(place-tile 34 200.000000 -48.000000)
(place-tile 94 72.000000 56.000000)
(place-tile 94 80.000000 56.000000)
(place-tile 94 88.000000 56.000000)
(place-tile 94 96.000000 56.000000)
(place-tile 94 104.000000 56.000000)
(place-tile 94 112.000000 56.000000)
(place-tile 94 120.000000 56.000000)
(place-tile 94 0.000000 56.000000)
(place-tile 94 -8.000000 56.000000)
(place-tile 94 -16.000000 56.000000)
(place-tile 94 -24.000000 56.000000)
(place-tile 94 -32.000000 56.000000)
(place-tile 94 -40.000000 56.000000)
(place-tile 94 -48.000000 56.000000)
(place-tile 94 -56.000000 56.000000)
(place-tile 94 -64.000000 56.000000)
(place-tile 94 -72.000000 56.000000)
(place-tile 94 -80.000000 56.000000)
(place-tile 94 -88.000000 56.000000)
(place-tile 94 -96.000000 56.000000)
(place-tile 93 -104.000000 56.000000)
(place-tile 94 128.000000 56.000000)
(place-tile 96 -104.000000 64.000000)
(place-tile 96 -104.000000 72.000000)
(place-tile 96 -104.000000 80.000000)
(place-tile 96 -104.000000 88.000000)
(place-tile 97 -104.000000 96.000000)
(place-tile 98 -96.000000 96.000000)
(place-tile 98 -88.000000 96.000000)
(place-tile 98 -80.000000 96.000000)
(place-tile 98 -72.000000 96.000000)
(place-tile 98 -64.000000 96.000000)
(place-tile 98 -56.000000 96.000000)
(place-tile 98 -48.000000 96.000000)
(place-tile 98 -40.000000 96.000000)
(place-tile 98 -32.000000 96.000000)
(place-tile 98 -24.000000 96.000000)
(place-tile 98 -16.000000 96.000000)
(place-tile 98 -8.000000 96.000000)
(place-tile 98 0.000000 96.000000)
(place-tile 98 8.000000 96.000000)
(place-tile 98 16.000000 96.000000)
(place-tile 98 24.000000 96.000000)
(place-tile 98 32.000000 96.000000)
(place-tile 98 40.000000 96.000000)
(place-tile 98 48.000000 96.000000)
(place-tile 98 56.000000 96.000000)
(place-tile 98 64.000000 96.000000)
(place-tile 98 72.000000 96.000000)
(place-tile 98 80.000000 96.000000)
(place-tile 98 88.000000 96.000000)
(place-tile 98 96.000000 96.000000)
(place-tile 98 104.000000 96.000000)
(place-tile 98 112.000000 96.000000)
(place-tile 98 120.000000 96.000000)
(place-tile 95 224.000000 56.000000)
(place-tile 98 128.000000 96.000000)
(place-tile 101 144.000000 64.000000)
(place-tile 101 144.000000 72.000000)
(place-tile 101 136.000000 72.000000)
(place-tile 101 128.000000 88.000000)
(place-tile 94 216.000000 56.000000)
(place-tile 101 120.000000 88.000000)
(place-tile 101 112.000000 88.000000)
(place-tile 101 104.000000 88.000000)
(place-tile 101 96.000000 88.000000)
(place-tile 101 88.000000 88.000000)
(place-tile 101 80.000000 88.000000)
(place-tile 101 72.000000 88.000000)
(place-tile 101 64.000000 88.000000)
(place-tile 101 56.000000 88.000000)
(place-tile 101 48.000000 88.000000)
(place-tile 101 40.000000 88.000000)
(place-tile 101 32.000000 88.000000)
(place-tile 101 24.000000 88.000000)
(place-tile 101 16.000000 88.000000)
(place-tile 101 8.000000 88.000000)
(place-tile 101 0.000000 88.000000)
(place-tile 101 -8.000000 88.000000)
(place-tile 101 -16.000000 88.000000)
(place-tile 101 -24.000000 88.000000)
(place-tile 101 -32.000000 88.000000)
(place-tile 101 -40.000000 88.000000)
(place-tile 101 -48.000000 88.000000)
(place-tile 101 -56.000000 88.000000)
(place-tile 101 -64.000000 88.000000)
(place-tile 101 -72.000000 88.000000)
(place-tile 101 -80.000000 88.000000)
(place-tile 101 -88.000000 88.000000)
(place-tile 101 -96.000000 88.000000)
(place-tile 101 -96.000000 80.000000)
(place-tile 101 -96.000000 72.000000)
(place-tile 101 -88.000000 72.000000)
(place-tile 101 -96.000000 64.000000)
(place-tile 101 -88.000000 64.000000)
(place-tile 101 -80.000000 64.000000)
(place-tile 101 -72.000000 64.000000)
(place-tile 101 -72.000000 72.000000)
(place-tile 101 -80.000000 72.000000)
(place-tile 101 -88.000000 80.000000)
(place-tile 101 -80.000000 80.000000)
(place-tile 101 -72.000000 80.000000)
(place-tile 101 -56.000000 80.000000)
(place-tile 101 -48.000000 80.000000)
(place-tile 101 -40.000000 80.000000)
(place-tile 101 -40.000000 72.000000)
(place-tile 101 -32.000000 80.000000)
(place-tile 101 -64.000000 80.000000)
(place-tile 101 -64.000000 72.000000)
(place-tile 101 -56.000000 64.000000)
(place-tile 101 -64.000000 64.000000)
(place-tile 101 -48.000000 64.000000)
(place-tile 101 -40.000000 64.000000)
(place-tile 101 -32.000000 64.000000)
(place-tile 101 -32.000000 72.000000)
(place-tile 101 -24.000000 80.000000)
(place-tile 101 -48.000000 72.000000)
(place-tile 101 -56.000000 72.000000)
(place-tile 101 -16.000000 80.000000)
(place-tile 101 0.000000 80.000000)
(place-tile 101 8.000000 80.000000)
(place-tile 101 -8.000000 80.000000)
(place-tile 101 -24.000000 72.000000)
(place-tile 101 -16.000000 64.000000)
(place-tile 101 -8.000000 64.000000)
(place-tile 101 -24.000000 64.000000)
(place-tile 101 -16.000000 72.000000)
(place-tile 101 -8.000000 72.000000)
(place-tile 101 0.000000 72.000000)
(place-tile 101 8.000000 72.000000)
(place-tile 101 16.000000 64.000000)
(place-tile 101 32.000000 72.000000)
(place-tile 101 24.000000 80.000000)
(place-tile 101 16.000000 80.000000)
(place-tile 101 32.000000 80.000000)
(place-tile 101 40.000000 72.000000)
(place-tile 101 56.000000 72.000000)
(place-tile 101 48.000000 72.000000)
(place-tile 101 16.000000 72.000000)
(place-tile 101 8.000000 64.000000)
(place-tile 101 0.000000 64.000000)
(place-tile 101 24.000000 72.000000)
(place-tile 101 24.000000 64.000000)
(place-tile 101 32.000000 64.000000)
(place-tile 101 40.000000 64.000000)
(place-tile 101 48.000000 64.000000)
(place-tile 101 56.000000 64.000000)
(place-tile 101 64.000000 64.000000)
(place-tile 101 64.000000 80.000000)
(place-tile 101 40.000000 80.000000)
(place-tile 101 48.000000 80.000000)
(place-tile 101 56.000000 80.000000)
(place-tile 101 72.000000 80.000000)
(place-tile 101 80.000000 80.000000)
(place-tile 101 64.000000 72.000000)
(place-tile 101 72.000000 72.000000)
(place-tile 101 80.000000 64.000000)
(place-tile 101 80.000000 72.000000)
(place-tile 101 88.000000 72.000000)
(place-tile 101 96.000000 64.000000)
(place-tile 101 88.000000 64.000000)
(place-tile 101 72.000000 64.000000)
(place-tile 101 96.000000 72.000000)
(place-tile 101 88.000000 80.000000)
(place-tile 101 96.000000 80.000000)
(place-tile 101 104.000000 80.000000)
(place-tile 101 128.000000 80.000000)
(place-tile 101 112.000000 80.000000)
(place-tile 101 120.000000 72.000000)
(place-tile 101 112.000000 72.000000)
(place-tile 101 104.000000 64.000000)
(place-tile 101 104.000000 72.000000)
(place-tile 101 120.000000 80.000000)
(place-tile 101 128.000000 64.000000)
(place-tile 101 128.000000 72.000000)
(place-tile 101 112.000000 64.000000)
(place-tile 3 72.000000 48.000000)
(place-tile 3 80.000000 48.000000)
(place-tile 3 88.000000 48.000000)
(place-tile 3 96.000000 48.000000)
(place-tile 3 104.000000 48.000000)
(place-tile 3 112.000000 48.000000)
(place-tile 3 120.000000 48.000000)
(place-tile 3 128.000000 48.000000)
(place-tile 3 -16.000000 48.000000)
(place-tile 3 -24.000000 48.000000)
(place-tile 3 -32.000000 48.000000)
(place-tile 3 -40.000000 48.000000)
(place-tile 3 -48.000000 48.000000)
(place-tile 3 -56.000000 48.000000)
(place-tile 3 -64.000000 48.000000)
(place-tile 3 -72.000000 48.000000)
(place-tile 3 -80.000000 48.000000)
(place-tile 3 -88.000000 48.000000)
(place-tile 3 -96.000000 48.000000)
(place-tile 3 -104.000000 48.000000)
(place-tile 28 -24.000000 -56.000000)
(place-tile 34 -32.000000 -64.000000)
(place-tile 29 -56.000000 -48.000000)
(place-tile 34 -24.000000 -64.000000)
(place-tile 26 -16.000000 -72.000000)
(place-tile 26 -16.000000 -64.000000)
(place-tile 34 -24.000000 -72.000000)
(place-tile 34 -32.000000 -72.000000)
(place-tile 34 -32.000000 -96.000000)
(place-tile 26 -16.000000 -88.000000)
(place-tile 34 -24.000000 -88.000000)
(place-tile 26 -16.000000 -80.000000)
(place-tile 34 -24.000000 -96.000000)
(place-tile 34 -32.000000 -88.000000)
(place-tile 27 72.000000 -80.000000)
(place-tile 27 72.000000 -88.000000)
(place-tile 34 80.000000 -96.000000)
(place-tile 34 88.000000 -96.000000)
(place-tile 34 96.000000 -96.000000)
(place-tile 34 104.000000 -96.000000)
(place-tile 34 104.000000 -88.000000)
(place-tile 34 96.000000 -88.000000)
(place-tile 34 88.000000 -88.000000)
(place-tile 34 80.000000 -88.000000)
(place-tile 28 -40.000000 -56.000000)
(place-tile 34 -48.000000 -64.000000)
(place-tile 34 -48.000000 -72.000000)
(place-tile 34 -48.000000 -80.000000)
(place-tile 34 -48.000000 -88.000000)
(place-tile 34 -40.000000 -88.000000)
(place-tile 34 -40.000000 -96.000000)
(place-tile 34 -48.000000 -96.000000)
(place-tile 34 -56.000000 -96.000000)
(place-tile 34 -56.000000 -88.000000)
(place-tile 34 -56.000000 -80.000000)
(place-tile 34 -56.000000 -72.000000)
(place-tile 34 -56.000000 -64.000000)
(place-tile 29 -48.000000 -48.000000)
(place-tile 35 -40.000000 -72.000000)
(place-tile 35 -40.000000 -64.000000)
(place-tile 35 -40.000000 -80.000000)
(place-tile 35 -32.000000 -80.000000)
(place-tile 35 -24.000000 -80.000000)
(place-tile 27 72.000000 -72.000000)
(place-tile 28 104.000000 -56.000000)
(place-tile 29 104.000000 -48.000000)
(place-tile 34 104.000000 -72.000000)
(place-tile 34 104.000000 -80.000000)
(place-tile 34 96.000000 -80.000000)
(place-tile 34 88.000000 -80.000000)
(place-tile 4 112.000000 -16.000000)
(place-tile 72 152.000000 -8.000000)
(place-tile 46 128.000000 -8.000000)
(place-tile 27 120.000000 8.000000)
(place-tile 45 136.000000 -32.000000)
(place-tile 27 120.000000 24.000000)
(place-tile 27 120.000000 32.000000)
(place-tile 34 128.000000 40.000000)
(place-tile 34 144.000000 40.000000)
(place-tile 34 128.000000 32.000000)
(place-tile 73 -104.000000 152.000000)
(place-tile 27 120.000000 40.000000)
(place-tile 23 128.000000 24.000000)
(place-tile 34 136.000000 16.000000)
(place-tile 34 128.000000 8.000000)
(place-tile 13 168.000000 0.000000)
(place-tile 8 112.000000 -64.000000)
(place-tile 46 136.000000 -16.000000)
(place-tile 4 112.000000 -80.000000)
(place-tile 4 112.000000 -24.000000)
(place-tile 4 112.000000 -32.000000)
(place-tile 4 112.000000 -56.000000)
(place-tile 8 112.000000 -48.000000)
(place-tile 4 112.000000 -72.000000)
(place-tile 4 112.000000 -88.000000)
(place-tile 4 112.000000 -96.000000)
(place-tile 13 136.000000 0.000000)
(place-tile 13 144.000000 0.000000)
(place-tile 13 152.000000 0.000000)
(place-tile 12 128.000000 0.000000)
(place-tile 46 136.000000 -8.000000)
(place-tile 68 152.000000 -24.000000)
(place-tile 71 144.000000 -8.000000)
(place-tile 46 160.000000 -8.000000)
(place-tile 13 184.000000 0.000000)
(place-tile 46 168.000000 -16.000000)
(place-tile 46 160.000000 -16.000000)
(place-tile 86 184.000000 -24.000000)
(place-tile 70 152.000000 -16.000000)
(place-tile 46 128.000000 -16.000000)
(place-tile 46 128.000000 -24.000000)
(place-tile 36 168.000000 -72.000000)
(place-tile 69 144.000000 -16.000000)
(place-tile 67 144.000000 -24.000000)
(place-tile 46 160.000000 -24.000000)
(place-tile 46 168.000000 -24.000000)
(place-tile 45 128.000000 -32.000000)
(place-tile 36 144.000000 -56.000000)
(place-tile 45 144.000000 -32.000000)
(place-tile 45 152.000000 -32.000000)
(place-tile 45 176.000000 -32.000000)
(place-tile 85 120.000000 -16.000000)
(place-tile 85 120.000000 -24.000000)
(place-tile 83 120.000000 -32.000000)
(place-tile 73 120.000000 -40.000000)
(place-tile 73 120.000000 -48.000000)
(place-tile 73 120.000000 -56.000000)
(place-tile 73 120.000000 -64.000000)
(place-tile 73 120.000000 -72.000000)
(place-tile 73 120.000000 -80.000000)
(place-tile 73 120.000000 -88.000000)
(place-tile 73 120.000000 -96.000000)
(place-tile 97 120.000000 -104.000000)
(place-tile 98 128.000000 -104.000000)
(place-tile 98 136.000000 -104.000000)
(place-tile 98 144.000000 -104.000000)
(place-tile 98 152.000000 -104.000000)
(place-tile 98 160.000000 -104.000000)
(place-tile 98 168.000000 -104.000000)
(place-tile 101 128.000000 -120.000000)
(place-tile 96 120.000000 -128.000000)
(place-tile 101 128.000000 -128.000000)
(place-tile 93 120.000000 -136.000000)
(place-tile 94 128.000000 -136.000000)
(place-tile 94 136.000000 -136.000000)
(place-tile 94 144.000000 -136.000000)
(place-tile 94 152.000000 -136.000000)
(place-tile 94 160.000000 -136.000000)
(place-tile 94 168.000000 -136.000000)
(place-tile 94 176.000000 -136.000000)
(place-tile 100 184.000000 -128.000000)
(place-tile 100 184.000000 -120.000000)
(place-tile 100 184.000000 -112.000000)
(place-tile 95 184.000000 -136.000000)
(place-tile 99 184.000000 -104.000000)
(place-tile 98 176.000000 -104.000000)
(place-tile 96 120.000000 -120.000000)
(place-tile 101 128.000000 -112.000000)
(place-tile 101 136.000000 -112.000000)
(place-tile 101 144.000000 -112.000000)
(place-tile 101 152.000000 -112.000000)
(place-tile 101 160.000000 -112.000000)
(place-tile 101 168.000000 -112.000000)
(place-tile 101 176.000000 -112.000000)
(place-tile 101 176.000000 -120.000000)
(place-tile 101 176.000000 -128.000000)
(place-tile 101 168.000000 -128.000000)
(place-tile 101 160.000000 -128.000000)
(place-tile 101 152.000000 -120.000000)
(place-tile 101 144.000000 -128.000000)
(place-tile 101 152.000000 -128.000000)
(place-tile 101 136.000000 -120.000000)
(place-tile 101 144.000000 -120.000000)
(place-tile 101 160.000000 -120.000000)
(place-tile 101 168.000000 -120.000000)
(place-tile 101 136.000000 -128.000000)
(place-tile 96 120.000000 -112.000000)
(place-tile 39 128.000000 -96.000000)
(place-tile 39 128.000000 -88.000000)
(place-tile 39 128.000000 -80.000000)
(place-tile 39 128.000000 -72.000000)
(place-tile 39 128.000000 -64.000000)
(place-tile 39 128.000000 -56.000000)
(place-tile 39 128.000000 -48.000000)
(place-tile 39 128.000000 -40.000000)
(place-tile 40 152.000000 -96.000000)
(place-tile 40 152.000000 -88.000000)
(place-tile 40 152.000000 -80.000000)
(place-tile 40 152.000000 -72.000000)
(place-tile 40 152.000000 -64.000000)
(place-tile 40 152.000000 -56.000000)
(place-tile 40 152.000000 -48.000000)
(place-tile 40 152.000000 -40.000000)
(place-tile 36 144.000000 -96.000000)
(place-tile 42 144.000000 -80.000000)
(place-tile 41 136.000000 -48.000000)
(place-tile 36 136.000000 -96.000000)
(place-tile 36 136.000000 -72.000000)
(place-tile 42 144.000000 -48.000000)
(place-tile 36 136.000000 -88.000000)
(place-tile 36 168.000000 -96.000000)
(place-tile 41 136.000000 -80.000000)
(place-tile 36 144.000000 -88.000000)
(place-tile 36 144.000000 -64.000000)
(place-tile 36 136.000000 -64.000000)
(place-tile 36 136.000000 -56.000000)
(place-tile 46 136.000000 -24.000000)
(place-tile 36 136.000000 -40.000000)
(place-tile 36 144.000000 -40.000000)
(place-tile 74 184.000000 -96.000000)
(place-tile 74 184.000000 -88.000000)
(place-tile 74 184.000000 -80.000000)
(place-tile 74 184.000000 -72.000000)
(place-tile 74 184.000000 -64.000000)
(place-tile 74 184.000000 -56.000000)
(place-tile 74 184.000000 -48.000000)
(place-tile 74 184.000000 -40.000000)
(place-tile 34 200.000000 -24.000000)
(place-tile 84 184.000000 -32.000000)
(place-tile 9 192.000000 -24.000000)
(place-tile 9 192.000000 -16.000000)
(place-tile 9 192.000000 -8.000000)
(place-tile 34 200.000000 16.000000)
(place-tile 9 192.000000 -56.000000)
(place-tile 34 200.000000 8.000000)
(place-tile 9 192.000000 -32.000000)
(place-tile 9 192.000000 -40.000000)
(place-tile 9 192.000000 -48.000000)
(place-tile 19 192.000000 0.000000)
(place-tile 13 176.000000 0.000000)
(place-tile 46 168.000000 -8.000000)
(place-tile 46 176.000000 -8.000000)
(place-tile 46 176.000000 -16.000000)
(place-tile 46 176.000000 -24.000000)
(place-tile 86 184.000000 -8.000000)
(place-tile 86 184.000000 -16.000000)
(place-tile 45 168.000000 -32.000000)
(place-tile 45 160.000000 -32.000000)
(place-tile 36 160.000000 -40.000000)
(place-tile 74 168.000000 -40.000000)
(place-tile 36 160.000000 -64.000000)
(place-tile 36 160.000000 -72.000000)
(place-tile 36 160.000000 -80.000000)
(place-tile 36 176.000000 -88.000000)
(place-tile 36 160.000000 -88.000000)
(place-tile 36 160.000000 -96.000000)
(place-tile 74 176.000000 -40.000000)
(place-tile 36 160.000000 -48.000000)
(place-tile 36 160.000000 -56.000000)
(place-tile 36 168.000000 -56.000000)
(place-tile 36 168.000000 -64.000000)
(place-tile 38 168.000000 -48.000000)
(place-tile 36 176.000000 -80.000000)
(place-tile 36 176.000000 -48.000000)
(place-tile 36 176.000000 -56.000000)
(place-tile 36 176.000000 -64.000000)
(place-tile 36 176.000000 -72.000000)
(place-tile 36 144.000000 -72.000000)
(place-tile 36 168.000000 -88.000000)
(place-tile 38 168.000000 -80.000000)
(place-tile 36 176.000000 -96.000000)
(place-tile 34 136.000000 8.000000)
(place-tile 34 144.000000 8.000000)
(place-tile 34 152.000000 8.000000)
(place-tile 34 160.000000 8.000000)
(place-tile 34 168.000000 8.000000)
(place-tile 34 176.000000 8.000000)
(place-tile 27 192.000000 40.000000)
(place-tile 24 136.000000 24.000000)
(place-tile 24 144.000000 24.000000)
(place-tile 24 152.000000 24.000000)
(place-tile 24 160.000000 24.000000)
(place-tile 24 168.000000 24.000000)
(place-tile 24 176.000000 24.000000)
(place-tile 34 176.000000 16.000000)
(place-tile 27 192.000000 8.000000)
(place-tile 27 192.000000 24.000000)
(place-tile 27 192.000000 32.000000)
(place-tile 26 184.000000 8.000000)
(place-tile 26 184.000000 24.000000)
(place-tile 26 184.000000 32.000000)
(place-tile 3 136.000000 48.000000)
(place-tile 3 144.000000 48.000000)
(place-tile 3 152.000000 48.000000)
(place-tile 3 160.000000 48.000000)
(place-tile 3 168.000000 48.000000)
(place-tile 3 176.000000 48.000000)
(place-tile 3 184.000000 48.000000)
(place-tile 34 136.000000 32.000000)
(place-tile 34 144.000000 32.000000)
(place-tile 34 152.000000 32.000000)
(place-tile 34 160.000000 32.000000)
(place-tile 34 168.000000 32.000000)
(place-tile 34 176.000000 32.000000)
(place-tile 34 176.000000 40.000000)
(place-tile 34 168.000000 40.000000)
(place-tile 34 160.000000 40.000000)
(place-tile 34 152.000000 40.000000)
(place-tile 34 136.000000 40.000000)
(place-tile 34 144.000000 16.000000)
(place-tile 34 152.000000 16.000000)
(place-tile 34 160.000000 16.000000)
(place-tile 34 168.000000 16.000000)
(place-tile 26 184.000000 16.000000)
(place-tile 34 200.000000 40.000000)
(place-tile 34 200.000000 32.000000)
(place-tile 34 200.000000 24.000000)
(place-tile 3 224.000000 48.000000)
(place-tile 29 232.000000 0.000000)
(place-tile 34 200.000000 -16.000000)
(place-tile 34 200.000000 -32.000000)
(place-tile 34 200.000000 -40.000000)
(place-tile 94 136.000000 56.000000)
(place-tile 94 144.000000 56.000000)
(place-tile 94 152.000000 56.000000)
(place-tile 94 160.000000 56.000000)
(place-tile 94 168.000000 56.000000)
(place-tile 94 176.000000 56.000000)
(place-tile 94 184.000000 56.000000)
(place-tile 98 136.000000 96.000000)
(place-tile 98 144.000000 96.000000)
(place-tile 98 152.000000 96.000000)
(place-tile 98 160.000000 96.000000)
(place-tile 98 168.000000 96.000000)
(place-tile 98 176.000000 96.000000)
(place-tile 98 184.000000 96.000000)
(place-tile 98 192.000000 96.000000)
(place-tile 101 136.000000 88.000000)
(place-tile 101 144.000000 80.000000)
(place-tile 101 136.000000 80.000000)
(place-tile 101 136.000000 64.000000)
(place-tile 98 216.000000 96.000000)
(place-tile 100 224.000000 88.000000)
(place-tile 100 224.000000 80.000000)
(place-tile 100 224.000000 72.000000)
(place-tile 100 224.000000 64.000000)
(place-tile 99 224.000000 96.000000)
(place-tile 94 192.000000 56.000000)
(place-tile 94 200.000000 56.000000)
(place-tile 94 208.000000 56.000000)
(place-tile 98 200.000000 96.000000)
(place-tile 98 208.000000 96.000000)
(place-tile 101 144.000000 88.000000)
(place-tile 101 152.000000 88.000000)
(place-tile 101 160.000000 88.000000)
(place-tile 101 168.000000 88.000000)
(place-tile 101 176.000000 88.000000)
(place-tile 101 184.000000 88.000000)
(place-tile 101 192.000000 88.000000)
(place-tile 101 208.000000 80.000000)
(place-tile 101 200.000000 88.000000)
(place-tile 101 216.000000 80.000000)
(place-tile 101 216.000000 88.000000)
(place-tile 101 200.000000 80.000000)
(place-tile 101 192.000000 80.000000)
(place-tile 101 184.000000 80.000000)
(place-tile 101 176.000000 80.000000)
(place-tile 101 168.000000 80.000000)
(place-tile 101 160.000000 80.000000)
(place-tile 101 152.000000 80.000000)
(place-tile 101 152.000000 72.000000)
(place-tile 101 152.000000 64.000000)
(place-tile 101 160.000000 64.000000)
(place-tile 101 160.000000 72.000000)
(place-tile 101 168.000000 72.000000)
(place-tile 101 168.000000 64.000000)
(place-tile 101 176.000000 64.000000)
(place-tile 101 184.000000 64.000000)
(place-tile 101 200.000000 72.000000)
(place-tile 101 184.000000 72.000000)
(place-tile 101 176.000000 72.000000)
(place-tile 101 192.000000 64.000000)
(place-tile 101 200.000000 64.000000)
(place-tile 101 208.000000 64.000000)
(place-tile 101 216.000000 72.000000)
(place-tile 101 208.000000 88.000000)
(place-tile 101 216.000000 64.000000)
(place-tile 101 208.000000 72.000000)
(place-tile 101 192.000000 72.000000)
(place-tile 74 224.000000 104.000000)
(place-tile 74 224.000000 112.000000)
(place-tile 74 224.000000 120.000000)
(place-tile 74 224.000000 128.000000)
(place-tile 74 224.000000 136.000000)
(place-tile 74 224.000000 144.000000)
(place-tile 74 224.000000 152.000000)
(place-tile 36 216.000000 104.000000)
(place-tile 36 208.000000 104.000000)
(place-tile 36 200.000000 104.000000)
(place-tile 36 192.000000 104.000000)
(place-tile 36 184.000000 104.000000)
(place-tile 36 176.000000 104.000000)
(place-tile 36 168.000000 104.000000)
(place-tile 36 160.000000 104.000000)
(place-tile 36 152.000000 104.000000)
(place-tile 36 144.000000 104.000000)
(place-tile 36 136.000000 104.000000)
(place-tile 36 128.000000 104.000000)
(place-tile 36 120.000000 104.000000)
(place-tile 36 112.000000 104.000000)
(place-tile 36 104.000000 104.000000)
(place-tile 36 96.000000 104.000000)
(place-tile 36 88.000000 104.000000)
(place-tile 36 80.000000 104.000000)
(place-tile 36 72.000000 104.000000)
(place-tile 36 64.000000 104.000000)
(place-tile 36 56.000000 104.000000)
(place-tile 36 48.000000 104.000000)
(place-tile 36 40.000000 104.000000)
(place-tile 36 32.000000 104.000000)
(place-tile 36 24.000000 104.000000)
(place-tile 36 16.000000 104.000000)
(place-tile 36 8.000000 104.000000)
(place-tile 36 0.000000 104.000000)
(place-tile 36 -8.000000 104.000000)
(place-tile 36 -16.000000 104.000000)
(place-tile 36 -24.000000 104.000000)
(place-tile 36 -32.000000 104.000000)
(place-tile 36 -40.000000 104.000000)
(place-tile 36 -48.000000 104.000000)
(place-tile 36 -56.000000 104.000000)
(place-tile 36 -64.000000 104.000000)
(place-tile 36 -72.000000 104.000000)
(place-tile 36 -80.000000 104.000000)
(place-tile 36 -88.000000 104.000000)
(place-tile 36 -96.000000 104.000000)
(place-tile 36 -96.000000 112.000000)
(place-tile 36 -88.000000 112.000000)
(place-tile 36 -80.000000 112.000000)
(place-tile 36 -72.000000 112.000000)
(place-tile 36 -64.000000 112.000000)
(place-tile 36 -56.000000 112.000000)
(place-tile 36 -48.000000 112.000000)
(place-tile 36 -40.000000 112.000000)
(place-tile 36 -32.000000 112.000000)
(place-tile 36 -24.000000 112.000000)
(place-tile 36 -16.000000 112.000000)
(place-tile 36 -8.000000 112.000000)
(place-tile 36 0.000000 112.000000)
(place-tile 36 8.000000 112.000000)
(place-tile 36 16.000000 112.000000)
(place-tile 36 24.000000 112.000000)
(place-tile 36 32.000000 112.000000)
(place-tile 36 40.000000 112.000000)
(place-tile 36 48.000000 112.000000)
(place-tile 36 56.000000 112.000000)
(place-tile 36 64.000000 112.000000)
(place-tile 36 72.000000 112.000000)
(place-tile 36 80.000000 112.000000)
(place-tile 36 88.000000 112.000000)
(place-tile 36 96.000000 112.000000)
(place-tile 36 104.000000 112.000000)
(place-tile 36 112.000000 112.000000)
(place-tile 36 120.000000 112.000000)
(place-tile 36 136.000000 120.000000)
(place-tile 36 144.000000 120.000000)
(place-tile 36 152.000000 120.000000)
(place-tile 36 136.000000 112.000000)
(place-tile 36 168.000000 120.000000)
(place-tile 36 160.000000 120.000000)
(place-tile 36 144.000000 112.000000)
(place-tile 36 128.000000 112.000000)
(place-tile 36 152.000000 112.000000)
(place-tile 36 160.000000 112.000000)
(place-tile 36 168.000000 112.000000)
(place-tile 36 176.000000 112.000000)
(place-tile 36 184.000000 112.000000)
(place-tile 36 192.000000 112.000000)
(place-tile 36 200.000000 112.000000)
(place-tile 36 208.000000 112.000000)
(place-tile 36 216.000000 120.000000)
(place-tile 36 216.000000 112.000000)
(place-tile 36 208.000000 120.000000)
(place-tile 36 200.000000 120.000000)
(place-tile 36 192.000000 120.000000)
(place-tile 36 184.000000 120.000000)
(place-tile 36 176.000000 120.000000)
(place-tile 36 128.000000 120.000000)
(place-tile 36 120.000000 120.000000)
(place-tile 36 112.000000 120.000000)
(place-tile 36 104.000000 120.000000)
(place-tile 36 96.000000 120.000000)
(place-tile 36 88.000000 120.000000)
(place-tile 36 80.000000 120.000000)
(place-tile 36 72.000000 120.000000)
(place-tile 36 64.000000 120.000000)
(place-tile 36 56.000000 120.000000)
(place-tile 36 48.000000 120.000000)
(place-tile 36 40.000000 120.000000)
(place-tile 36 32.000000 120.000000)
(place-tile 36 24.000000 120.000000)
(place-tile 36 16.000000 120.000000)
(place-tile 36 8.000000 120.000000)
(place-tile 36 0.000000 120.000000)
(place-tile 36 -8.000000 120.000000)
(place-tile 36 -16.000000 120.000000)
(place-tile 36 -24.000000 120.000000)
(place-tile 36 -32.000000 120.000000)
(place-tile 36 -40.000000 120.000000)
(place-tile 36 -48.000000 120.000000)
(place-tile 36 -56.000000 120.000000)
(place-tile 36 -64.000000 120.000000)
(place-tile 36 -72.000000 120.000000)
(place-tile 36 -80.000000 120.000000)
(place-tile 36 -88.000000 120.000000)
(place-tile 36 -96.000000 120.000000)
(place-tile 73 -104.000000 104.000000)
(place-tile 73 -104.000000 112.000000)
(place-tile 73 -104.000000 120.000000)
(place-tile 73 -104.000000 128.000000)
(place-tile 73 -104.000000 136.000000)
(place-tile 73 -104.000000 144.000000)
(place-tile 3 192.000000 48.000000)
(place-tile 3 200.000000 48.000000)
(place-tile 3 208.000000 48.000000)
(place-tile 3 216.000000 48.000000)
(place-tile 29 200.000000 0.000000)
(place-tile 29 208.000000 0.000000)
(place-tile 29 216.000000 0.000000)
(place-tile 29 224.000000 0.000000)
(place-tile 28 200.000000 -8.000000)
(place-tile 28 208.000000 -8.000000)
(place-tile 28 216.000000 -8.000000)
(place-tile 28 224.000000 -8.000000)
(place-tile 34 96.000000 -40.000000)
(create-barrel 68.583206 -6.505334)
(create-barrel 1.520718 -7.442836)
(create-barrel 119.475250 -7.317834)
(create-blockade2 52.882500 48.521988)
(create-blockade2 116.543198 49.646988)
(create-blockade3 188.697372 35.097794)
(create-blockade1 98.710464 -54.129890)
(create-bus 153.038727 18.958153)
(create-blockade3 91.453026 -30.482473)
(create-blockade3 -39.555264 -39.319012)
(create-pole2 113.367889 -1.914592)
(create-pole2 -18.700352 -15.289589)
(create-pole1 23.370382 1.925035)
(create-pole1 97.354065 25.300034)

  
  
  
;;;;;;;;;;;;;;;;;;;;;;;;;;
;; ^ EXPORT GOES HERE ^ ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;
  
  
  (spawn-big-spawner 200 0)

  (spawn-small-spawner 200 40)
  
  
  )












;;;;;;;;;;;;;;;;;;;;;;;;;
;;  Level Editor       ;;
;;;;;;;;;;;;;;;;;;;;;;;;;
(define (load-level-edit)
  ;(delete-entity title)
  (display "Level Editor")
  (newline)
  
  (define ent (let ((e (create-entity)))
		(set-component e 'Position (list 0 0))
		(set-component e 'CameraFocus (list 0 0))
		(set-component e 'LevelEdit)
		e))
  
  (set! ghost 
  	(let ((e (create-entity)))
  		(set-component e 'Sprite (list tpose-right 100))
			(set-component e 'Bounds (list 2 2))
			(set-component e 'Position (list 0 0))
			e))

  
  (load-shit)
  
	(set! update (lambda (x y tx ty)
		(if tile-mode 
	  	(set-component ghost 'Position (list tx ty))
    	(set-component ghost 'Position (list x y))))))












;;;;;;;;;;;;;;;;;;;;;;;;;
;;       Level 1       ;;
;;;;;;;;;;;;;;;;;;;;;;;;;
(define (load-level-1)
  (begin 
    (write "Load level 1")
    (newline)
    ;(delete-entity title)
	;(spawn-blood 0 40 40)
	;(spawn-blood 1 60 40)
	;(spawn-blood 2 80 40)
	;(spawn-blood 3 100 40)

 	;(spawn-spawner 40 40)
 
	;(make-tiles2 "floors.png" 8 80 80)
	;(make-tiles2 "walls.png" 8 80 80)
	;(make-tiles2 "props.png" 8 160 160)
 	;(spawn-floor -100 -100 100 100)

 	(set! player (spawn-player 0 0))
	;(set! player (spawn-small-player 40 40))
	;(set! player (spawn-big-player 40 40))
 
 	;(spawn-big 0 20)
 	;(spawn-small 40 -20)
 	;(spawn-small 18 5)
 	;(spawn-big -81 120)
 	;(spawn-small 5 8)
  ;(spawn-big 40 -40)
 
	;(for 0 80 8
	;     (spawn-small i 0))
  (load-shit)
 ))

